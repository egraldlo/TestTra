install genie

准备：
jdk以及环境变量配置
hadoop local mode以及环境变量配置

1, 因为genie是REST-FUL的接口，所以，首先要安装Tomcat.
安装tomcat:
选择tomcat6.0安装，从http://tomcat.apache.org/download-60.cgi下载
然后解压，设置环境变量：
export TOMCAT_HOME=/PATH/TO/TOMCAT
export PATH=$TOMCAT_HOME/bin:$PATH
注意tomcat不要多次启动，或者多次关闭，否则会出错，启动会过一会就能登录
http://localhost:8080

2，安装genie，从github中复制genie的源代码
git clone git@github.com:Netflix/genie.git
cd genie/
然后进去文件genie-web/src/main/resources/genie.properties
修改以下必须要设置的：
netflix.appinfo.port=8080   
//可以默认为8080端口
netflix.genie.server.java.home=/path/to/your/javahome
netflix.genie.server.hadoop.1.0.3.home=/path/to/your/hadoophome
//因为我只是安装了hadoop进行测试genie，所以只是配置hadoop的目录
netflix.genie.server.sys.home=/path/to/geniebin
//一般是指向genie/bin(genie-web/conf/system/apps/genie/bin)
netflix.genie.server.job.dir.prefix=genie-jobs
netflix.genie.server.user.working.dir=/mnt/tomcat/genie-jobs
//*上面的两项我没有特别设置，暂时还不是很了解  

3，build genie
$cd genie
$./gradlew clean build

4，Deploy genie、
将genie-web/build/libs中的genie-web-0.21-SNAPSHOT.war复制到tomcat的
webapps/ROOT.war，然后进行部署：
$export CATALINA_HOME=/path/to/your/tomcathome
$./local_deploy.sh

5，run genie
将export CATALINA_OPTS="-Darchaius.deployment.applicationId=genie -Darchaius.deployment.environment=dev"
加入到环境变量中，但是还不知道有没有作用，因为没有安装Archaius

6，输入http://localhost:8080
如果前面的配置正确，你就能看见genie的主页面，上面有两个入口，一个是查询cluster，另一个是查询job。

7，run hadoop
然后注册一个hadoop cluster这里就是注册local mode
找到populateSampleConfigs.py 然后修改其中的cluster信息为你的hadoop的信息
然后在环境变量中配置
export SERVICE_BASE_URL=http://localhost:8080
然后提交hadoop cluster: python populateSampleConfigs.py
如果顺利，可以在localhost:8080页面中的查询集群入口能够查询到你注册的集群了。

8，run test
还没调通！！！cao!!
